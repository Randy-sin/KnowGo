# KnowGo 产品文档

## 📋 概述

KnowGo 是一个基于 Next.js 15 构建的个性化 AI 学习平台，采用硅谷风格的极简设计。应用引导用户完成完整的四步学习旅程：搜索 → 配置 → 引导问题 → 互动模拟器。

---

## 🗂 文件结构与页面映射

### **核心应用文件**

| 页面/组件 | 文件路径 | 路由 | 描述 |
|---|---|---|---|
| **主页** | `app/page.tsx` | `/` | 带搜索界面的主要着陆页 |
| **配置页** | `app/configure/page.tsx` | `/configure` | 学习偏好设置 |
| **引导学习页** | `app/learn/page.tsx` | `/learn` | 三阶段AI引导问题 |
| **互动模拟器** | `app/simulate/page.tsx` | `/simulate` | 游戏化学习体验 |
| **布局** | `app/layout.tsx` | - | 根布局与元数据 |
| **全局样式** | `app/globals.css` | - | 设计系统与样式 |

### **支持文件**

| 文件 | 路径 | 用途 |
|---|---|---|
| **设计系统** | `docx/design-system.md` | 设计原则和指导方针 |
| **UI组件** | `components/ui/` | 可复用的UI组件 |
| **工具函数** | `lib/utils.ts` | 辅助函数 |
| **类型定义** | `types/index.ts` | TypeScript 类型定义 |
| **忽略配置** | `.cursorignore` / `.cursorindexingignore` | Cursor AI功能优化 |

---

## 🚀 页面详情

### **1. 主页 (`app/page.tsx`)**

**路由：** `/`

**用途：** 用户查询的入口点

**主要功能：**
- 极简搜索界面
- 快速建议按钮
- 直接跳转到配置页面
- 硅谷风格设计

**代码亮点：**
```typescript
- useState 用于输入管理
- localStorage 用于查询持久化
- 直接 router.push 到 /configure
- Framer Motion 动画
```

**用户流程：**
1. 用户输入学习查询
2. 点击提交或建议
3. 重定向到配置页面

---

### **2. 配置页 (`app/configure/page.tsx`)**

**路由：** `/configure`

**用途：** 个性化学习体验

**主要功能：**
- 知识水平选择（初学者/中级/专家）
- 学习风格选择（12种不同风格）
- 带返回按钮的极简导航
- 实时进度指示器

**代码亮点：**
```typescript
- 复杂的选择状态管理
- 高级 Framer Motion 动画
- 选中状态的条件样式
- 配置的本地存储持久化
```

**用户流程：**
1. 选择知识水平
2. 选择学习风格
3. 进入引导学习页面

**可选学习风格：**
- 课堂式、讲故事、对话式、导师式
- 深度式、快速式、诗意式、轻松式
- 案例式、孔子式、叙述式、爱因斯坦式

---

### **3. 引导学习页 (`app/learn/page.tsx`) - 全新设计**

**路由：** `/learn`

**用途：** 基于README教育理念的渐进式AI引导学习

**设计理念：** 完全重新设计为OpenAI/苹果极简美学，专注于引发思考和知识引入

**核心特色：**
- **三阶段渐进式引导**：生活化引入 → 观察与发现 → 概念建立
- **垂直居中布局**：大量留白，营造呼吸感和专注力
- **纯灰度配色**：无任何鲜艳色彩，保持专业感
- **智能问题生成**：根据不同主题生成个性化引导问题

**三阶段学习流程：**

#### **阶段1：生活化引入 (Life Connection)**
- **目标**：激发用户的生活经验连接
- **示例**：抛物线 → "Have you ever watched a basketball shot? What did you notice about the ball's path?"
- **交互**：用户必须输入思考才能继续，确保主动参与

#### **阶段2：观察与发现 (Observation)**
- **目标**：引导用户观察和思考现象特点
- **示例**：抛物线 → "If we could trace that path, what shape would we see? How is it different from a straight line or circle?"
- **深化**：从具体观察转向抽象思考

#### **阶段3：概念建立 (Concept Building)**
- **目标**：自然引出学术概念
- **示例**：抛物线 → "This special curve has a name and mathematical properties. What do you think makes it so important in physics and math?"
- **完成**：建立完整的概念理解框架

**技术实现亮点：**
```typescript
- AnimatePresence 实现平滑阶段切换
- 渐进式动画时序：0.8s → 1.5s → 1.8s → 2.0s
- 智能问题匹配系统
- 用户回答历史追踪
- 无边框输入设计配合底部细线
- 微妙的hover/tap交互反馈
```

**多主题支持：**
- **抛物线/Parabola**：篮球投射相关问题
- **机器学习**：推荐系统相关问题
- **React**：网页交互相关问题
- **通用模板**：自动生成适配问题

---

### **4. 互动模拟器 (`app/simulate/page.tsx`) - 游戏化学习**

**路由：** `/simulate`

**用途：** 基于README"互动式模拟器"理念的游戏化学习体验

**设计理念：** 实现"投不中？这不是你的问题，而是抛物线的方程没调对"的教育理念

**核心功能：**
- **二次函数探索器**：y = ax² + bx + c 参数实时调节
- **Canvas实时渲染**：平滑的抛物线动画和轨迹追踪
- **智能AI教练**：基于表现的个性化提示系统
- **统计追踪**：尝试次数、命中率、准确度分析

**左右分栏布局：**
- **左侧**：800x500 Canvas可视化区域
- **右侧**：参数控制面板 + AI提示系统

**参数控制系统：**
```typescript
// 三个核心参数
- a (曲率): -0.05 ~ 0.05，控制开口方向和陡峭程度
- b (倾斜): -2 ~ 2，控制线性分量和倾斜度  
- c (高度): 0 ~ 150，控制y轴截距和起始高度

// 实时方程显示
y = {a.toFixed(3)}x² + {b.toFixed(2)}x + {c.toFixed(0)}
```

**AI教练系统：**
```typescript
// 自适应提示算法
const getCurrentHint = () => {
  const hintIndex = Math.min(attempts - hits - 1, failureHints.length - 1)
  return failureHints[Math.max(0, hintIndex)]
}

// 渐进式提示内容
failureHints: [
  "Try making 'a' more negative to create a steeper curve downward.",
  "Adjust 'b' to change the tilt and direction of the parabola.",
  "The parameter 'c' controls where your parabola starts vertically."
]
```

**可视化特色：**
- **实时轨迹绘制**：requestAnimationFrame 平滑动画
- **坐标参考系统**：虚线网格辅助理解
- **物理模拟**：真实的二次函数计算
- **目标挑战**：命中特定区域获得成就感

**多主题适配能力：**
- **抛物线**：二次函数参数调节器
- **机器学习**：推荐引擎可视化（预留）
- **React**：组件交互模拟器（预留）
- **通用框架**：支持扩展到任意学科

**技术亮点：**
```typescript
- Canvas 2D渲染引擎
- 物理计算算法
- 防御性编程（错误处理）
- 响应式设计
- 自定义滑块样式
- 状态管理优化
```

---

## 🔄 完整用户旅程 (更新版)

### **四步学习流程**
```
1. 搜索发现 (/)
   ↓ 输入学习主题
   ↓ 选择快速建议或自定义输入

2. 个性化配置 (/configure)
   ↓ 选择知识水平 (3个选项)
   ↓ 选择学习风格 (12个选项)
   ↓ 实时进度指示

3. 引导问题 (/learn)
   ↓ 生活化引入问题
   ↓ 观察与发现问题
   ↓ 概念建立问题
   ↓ 每阶段必须输入思考

4. 互动模拟器 (/simulate)
   ↓ 基于概念的游戏化体验
   ↓ 参数调节 + 实时反馈
   ↓ AI智能指导
   ↓ 掌握核心概念
```

### **数据流管理**
```typescript
// localStorage 数据持久化
'knowgo-query': 用户搜索的学习主题
'knowgo-config': 用户选择的学习配置
'knowgo-responses': 用户在引导阶段的所有回答

// 跨页面状态传递
主页 → 配置页: query
配置页 → 学习页: query + config  
学习页 → 模拟器: query + config + responses
```

---

## 🎨 设计系统升级

### **新增样式组件**
```css
/* 滑块控件样式 */
.slider: 自定义range input样式
.slider::-webkit-slider-thumb: 圆形滑块手柄
.slider:disabled: 禁用状态样式

/* 模拟器专用样式 */  
.simulator-canvas: 画布渐变背景
.animate-soft-pulse: 微妙脉动动画

/* 交互状态增强 */
.micro-bounce: 微交互反馈
.interactive: 通用交互样式
```

### **动画系统扩展**
- **渐进式展示**：多层次延迟动画
- **平滑过渡**：AnimatePresence页面切换
- **微交互**：hover、tap、focus状态
- **物理动画**：Canvas实时渲染

---

## 💾 技术架构升级

### **状态管理策略**
- **React hooks**：组件级状态管理
- **localStorage**：跨页面数据持久化
- **Context传递**：复杂状态共享
- **错误边界**：优雅的错误处理

### **性能优化**
- **代码分割**：页面级动态导入
- **动画优化**：requestAnimationFrame
- **内存管理**：Canvas清理机制
- **响应式设计**：移动端适配

### **AI集成准备**
- **Dify Workflow**：预留AI接口
- **游戏内容生成**：动态配置支持
- **智能提示系统**：个性化反馈机制
- **学习分析**：用户行为追踪

---

## 🎯 教育价值实现

### **从抽象到具体的学习路径**
1. **生活场景连接**：引导阶段建立直观理解
2. **概念逐步抽象**：从现象到理论的平滑过渡
3. **参数化操作**：模拟器阶段的动手实践
4. **反馈驱动学习**：AI教练的个性化指导

### **核心教育理念实现**
- ✅ **"投不中不是你的问题"**：友好的AI提示语言
- ✅ **"抛物线方程没调对"**：参数调节的直观理解
- ✅ **游戏化降低门槛**：通过玩耍自然学习
- ✅ **可视化抽象概念**：数学公式的图形化表示

### **学习效果评估**
- **参与度指标**：完成率、停留时间、交互次数
- **理解程度**：参数调节的合理性、目标达成情况
- **概念迁移**：从具体到抽象的理解转换
- **兴趣激发**：重复访问、主动探索行为

---

## 🔮 未来扩展计划

### **AI功能集成**
- **智能游戏生成**：基于主题自动创建互动体验
- **个性化提示**：基于学习历史的智能建议
- **自适应难度**：根据表现动态调整挑战
- **学习路径优化**：AI驱动的个性化学习序列

### **多学科支持**
- **数学类**：函数、几何、统计、微积分
- **物理类**：力学、光学、电磁、热力学
- **编程类**：算法、数据结构、框架原理
- **通用框架**：支持任意学科的快速适配

### **社交化功能**
- **学习小组**：协作式问题解决
- **教师工具**：课堂管理和进度追踪
- **成就系统**：激励机制和认证体系
- **内容共享**：用户生成的学习材料

---

*最后更新：2024年12月*
*版本：2.0.0 - 新增引导学习页面和互动模拟器* 